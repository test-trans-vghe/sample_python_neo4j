language: python

archive: true

python:
  - 2.7

env:
 global:
   - secure: TWYoE6pO+mdHDCSt4l5CNXhqutQ5ESyXyNwx9RddV13PLP1hJEo5L3dWeS5yN40caF3Pcq/JA+BdxQiqmJVPQzK+qacXzxpLOEbt4lbzJ7fZ9Vt05Ou80fW3YctFle4DqdQ3romwEX+/vB8JUabJ4+ckRAhsUsmeaXOamt2PAXEf8FYP+cDq+H6ttHFwBwy4vlBxKwO8HLCi9Je21V2tCCeU8fXTvaszNXksjbEDw1YfWJBH5MCM9KADBy/8SIm4e1aLjunQO51A1nzAUQi5H1d2nTbcUYNXxic4Qt4YgQb/ftex0XMa3SMsMETVTvd1B7fJRyeAA+vfzJh8IgxDWQ==
 matrix:
   - Foo=abr
   - secure: JprHrNDobhVVquuigCNlaCf9wQA/gtYZUNGU2etiC2pLP6hhecYUSIbjs4doyhc7oNz6bkl1vbeb0/k6GO5EGc+lMMAwbeAziwA+6sPM9ePRQ4qa+eHO4tc/snJmww3agSgP525YvOUDEXAhVBSfGjS0Cq1GrPYnMpOIsXC4VOHAlM/TvEjrcLPYko0Y29iYF2Uvt6gEj/9tSe31vBlkAcZ7p4TeI36tLl4i4Sy/PT8hW15Zjb9Y42KG3LUosTCIz0LBtT9BdLUwcbnLLhitmjtG0xcvqA97nvDf9Wq7fvt88jzuufrYli2c+5XGOt0GHBHLIXG31CNAJM0J1fk3vA==
# Mongo binds to 127.0.0.1 by default
services:
  - neo4j

install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - echo $key1 and $key2  and $key3 and $Foo
script:
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - coverage run --branch test.py
  - coverage xml -o shippable/codecoverage/coverage.xml test.py
