language: python

python:
  - 2.7
  - 2.6

# Mongo binds to 127.0.0.1 by default
services:
  - neo4j
#build_image: shippable/minv2


env:
  - secure: g3zGrwEN8TXYDnFitTEyyR1P+mw5NQRihi9eV+SW8epZh3/8GEN+tAosjwkrFwj9kzJP4129bJCvgCmfSsWztW/wypx68oNZIUTe3F4DwIHQiqZBmAM1k2MsBduGixzmPabgxIw5mz6Xs9/fMpf/Jd5akn8hOs0Cw2aNV4pxqFKbUjBPj5c1oQfovhc3Z7NW7o2Oyq7jnlyrC26KMxW4DO7HKUq/xYVa/RVCy73OVH7Bg2OqQ3K8JIohXLV4jmCiWDV6iIDf9TnPS7Jd+2GcqRdDeK5WNFojwKGYkhbJPb6fOPIHipyul5SzcMqL0MibkQhvNOwaLJJzydHghJxSvg==

install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - echo $key1

script:
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - coverage run --branch test.py
  - coverage xml -o shippable/codecoverage/coverage.xml test.py
archive: true
cache: true
